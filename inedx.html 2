<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>תפוס את המנעול</title>
<style>
  body{margin:0;overflow:hidden;background:#f0f0f0;font-family:Arial,sans-serif;text-align:center}
  #score{position:absolute;top:10px;left:10px;font-size:20px;background:rgba(255,255,255,.8);padding:5px 10px;border-radius:5px;display:none}
  #lock{position:absolute;width:60px;height:60px;background:url('https://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/Lock_font_awesome.svg/512px-Lock_font_awesome.svg.png') no-repeat center/contain;cursor:pointer;transition:transform .2s ease,background-color .3s ease;border-radius:10px;display:none}
  #overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.15)}
  #panel{background:#fff;padding:22px 26px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,.25);max-width:420px}
  #panel h1{margin:0 0 10px;font-size:22px}
  #panel p{margin:0 0 16px}
  #panel button{font-size:18px;padding:10px 18px;border:0;border-radius:8px;cursor:pointer;background:#1a73e8;color:#fff}
  #gameOver{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:20px;border-radius:10px;font-size:24px;box-shadow:0 0 20px rgba(0,0,0,.3)}
</style>
</head>
<body>
  <div id="score">נקודות: 0</div>
  <div id="lock" aria-label="lock"></div>

  <div id="overlay">
    <div id="panel">
      <h1>תפוס את המנעול</h1>
      <p>לחץ על "התחל". המנעול יופיע ויקפוץ כל כמה שניות. אחרי שתתפוס אותו כמה פעמים – הקצב יעלה.</p>
      <button id="startBtn">התחל</button>
    </div>
  </div>

  <div id="gameOver">המשחק נגמר!<br><button id="againBtn">שחק שוב</button></div>

<script>
  let score=0,misses=0,speed=2000,started=false;
  const lock=document.getElementById("lock");
  const scoreDisplay=document.getElementById("score");
  const overlay=document.getElementById("overlay");
  const gameOverScreen=document.getElementById("gameOver");
  const startBtn=document.getElementById("startBtn");
  const againBtn=document.getElementById("againBtn");
  let moveInterval;

  function randomColor(){return `hsl(${Math.random()*360},80%,70%)`;}
  function randomPosition(){
    const x=Math.max(0,Math.random()*(window.innerWidth-60));
    const y=Math.max(0,Math.random()*(window.innerHeight-60));
    lock.style.left=x+"px";
    lock.style.top=y+"px";
    lock.style.backgroundColor=randomColor();
  }

  function moveLock(){
    if(!started) return;
    randomPosition();
    misses++;
    if(misses>=3) endGame();
  }

  function startGame(){
    started=true;
    score=0; misses=0; speed=2000;
    scoreDisplay.textContent="נקודות: "+score;
    scoreDisplay.style.display="block";
    lock.style.display="block";
    overlay.style.display="none";
    gameOverScreen.style.display="none";
    randomPosition();
    clearInterval(moveInterval);
    moveInterval=setInterval(moveLock,speed);
  }

  function endGame(){
    started=false;
    clearInterval(moveInterval);
    gameOverScreen.style.display="block";
  }

  lock.addEventListener("click",()=>{
    if(!started) return;
    score++;
    scoreDisplay.textContent="נקודות: "+score;
    lock.style.transform="scale(1.2)";
    setTimeout(()=>lock.style.transform="scale(1)",150);
    if(speed>600){
      speed-=120;
      clearInterval(moveInterval);
      moveInterval=setInterval(moveLock,speed);
    }
    randomPosition();
  });

  startBtn.addEventListener("click", startGame);
  againBtn.addEventListener("click", startGame);
</script>
</body>
</html>
